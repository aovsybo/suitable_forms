# suitable_forms
# [Задание](https://docs.google.com/document/d/1fMFwPBs53xzcrltEFOpEG4GWTaQ-5jvVLrNT6_hmC7I/edit)
В базе данных хранится список шаблонов форм. Шаблон формы, это структура, которая задается уникальным набором полей, с указанием их типов. <br/>
Пример шаблона формы: 
```
{
    "name": "Form template name",
    "field_name_1": "email",
    "field_name_2": "phone"
}
```
Всего должно поддерживаться четыре типа данных полей: email, телефон, дата, текст.
Все типы кроме текста должны поддерживать валидацию. Телефон передается в стандартном формате +7 xxx xxx xx xx, дата передается в формате DD.MM.YYYY или YYYY-MM-DD.
Имя шаблона формы задается в свободной форме, например MyForm или Order Form.
Имена полей также задаются в свободной форме (желательно осмысленно), например user_name, order_date или lead_email.
На вход по урлу /get_form POST запросом передаются данные такого вида:
```
f_name1=value1&f_name2=value2
```
В ответ нужно вернуть имя шаблона формы, если она была найдена.
Чтобы найти подходящий шаблон нужно выбрать тот, поля которого совпали с полями в присланной форме. Совпадающими считаются поля, у которых совпали имя и тип значения. Полей в пришедшей форме может быть больше чем в шаблоне, в этом случае шаблон все равно будет считаться подходящим. Самое главное, чтобы все поля шаблона присутствовали в форме. <br/>
Если подходящей формы не нашлось, вернуть ответ в следующем формате
```
{
    f_name1: FIELD_TYPE,
    f_name2: FIELD_TYPE
}
```
где FIELD_TYPE это тип поля, выбранный на основе правил валидации, проверка правил должна производиться в следующем порядке дата, телефон, email, текст.

# Описание
Сервис, предоставляющий эндпоинты для создания форм и получения их по запросу. На данный момент реализовано:
- Создание формы с названием и полями
- Запрос формы с интересующими полями. Возвращается либо имя формы, если такая форма есть в базе, либо перечень полей с типами данных, определенными по правилам валидации, если форма отсутствует в базе
- Валидация данных (формат номера: +7 ххх ххх хх хх, формат даты: DD.MM.YYYY или YYYY-MM-DD, формат почты: text@text.text)
- Контейнеризация приложения через docker
- Тестирование при помощи UnitTests

# Технологии
Сервис разработан с использованием фреймворка Django и библиотеки Django Rest Framework.<br/><br/>
В качестве БД использовалась Mongo DB. Для обеспечения корректной связи Django и Mongo использовалась библиотека djongo.<br/>
Также проект и БД были обернуты в Docker-контейнеры и запускаются при помощи docker compose<br/>

# Запуск
Для запуска приложения в корне создать файл .env (файл отправил на почту):
```
SECRET_KEY=secret_key
HOST=host_line
```
Далее в корневом каталоге выполнить следующую команду:
```
docker compose up
```

# Тестирование
Тесты описаны в файле /forms.tests.py
Для тестирования необходимо получить хеш контейнера "web" следующей командой:
```
docker ps
```
Затем зайти внутрь данного контейнера при помощи следующей команды, вставив полученный на предыдущем этапе хеш:
```
docker exec -it <хеш> bash
```
Далее необходимо запустить тесты следующей командой:
```
python manage.py test
```
В случае успешного выполнения тестов будет выведено сообщение "OK" <br/><br/>
![image](https://github.com/aovsybo/suitable_forms/assets/66824112/7a53ff05-f087-4d69-8e17-1c57c1fc6b58)

# Пример работы
Создание формы с указанием имен и типов хранимых в ней полей 
![image](https://github.com/aovsybo/suitable_forms/assets/66824112/58ac0ed4-186a-4c02-aacc-8a8a0a48507a)

Получение формы, имеющейся в базе
![image](https://github.com/aovsybo/suitable_forms/assets/66824112/1fa0432d-8975-4d56-b6f5-934c50cc9e7d)

Получение формы, не иимеющейся в базе
![image](https://github.com/aovsybo/suitable_forms/assets/66824112/f6a1c6c3-fca0-4ff6-b8df-77ec24f3d53f)
